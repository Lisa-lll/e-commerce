# 电商系统快速启动指南

## 1. 环境要求

### 开发环境
- **Node.js**: 18.0.0 或更高版本
- **npm**: 9.0.0 或更高版本（或使用 yarn/pnpm）
- **MySQL**: 8.0 或更高版本
- **Redis**: 7.0 或更高版本
- **Git**: 2.0 或更高版本

### 可选工具
- **Docker**: 用于容器化部署（推荐）
- **Docker Compose**: 用于本地开发环境快速搭建
- **Postman**: API 测试工具
- **VS Code**: 推荐的代码编辑器

## 2. 项目初始化

### 2.1 克隆项目（如果已有仓库）
```bash
git clone <repository-url>
cd e-commerce
```

### 2.2 创建项目结构
```
e-commerce/
├── frontend/          # 前端项目
├── backend/           # 后端项目
├── admin/             # 管理后台项目
├── docker-compose.yml # Docker 编排文件
└── README.md          # 项目说明
```

## 3. 后端项目初始化

### 3.1 创建后端项目
```bash
# 使用 Express + TypeScript
mkdir backend && cd backend
npm init -y
npm install express cors helmet morgan dotenv
npm install -D typescript @types/node @types/express @types/cors @types/morgan ts-node nodemon
npm install mysql2 prisma @prisma/client
npm install bcrypt jsonwebtoken
npm install -D @types/bcrypt @types/jsonwebtoken
npm install joi express-joi-validator
npm install redis ioredis
npm install -D @types/ioredis
```

### 3.2 初始化 TypeScript
```bash
npx tsc --init
```

### 3.3 初始化 Prisma
```bash
npx prisma init
```

### 3.4 后端项目结构
```
backend/
├── src/
│   ├── config/          # 配置文件
│   ├── controllers/     # 控制器
│   ├── services/        # 业务逻辑
│   ├── models/          # 数据模型
│   ├── middlewares/     # 中间件
│   ├── routes/          # 路由
│   ├── utils/           # 工具函数
│   ├── validators/      # 数据验证
│   ├── types/           # TypeScript 类型
│   └── app.ts           # 应用入口
├── prisma/
│   ├── schema.prisma    # Prisma schema
│   └── migrations/      # 数据库迁移
├── tests/               # 测试文件
├── .env                 # 环境变量
├── .env.example         # 环境变量示例
├── package.json
├── tsconfig.json
└── README.md
```

### 3.5 环境变量配置（.env）
```env
# 服务器配置
PORT=3000
NODE_ENV=development

# 数据库配置
DATABASE_URL="mysql://user:password@localhost:3306/ecommerce_db"
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=ecommerce_db

# Redis 配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# JWT 配置
JWT_SECRET=your_jwt_secret_key_here
JWT_EXPIRE=7d

# 文件上传配置
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5242880

# 支付配置（后续添加）
WECHAT_APP_ID=
WECHAT_MCH_ID=
WECHAT_API_KEY=
ALIPAY_APP_ID=
ALIPAY_PRIVATE_KEY=
```

## 4. 前端项目初始化

### 4.1 创建前端项目（使用 Vite + React + TypeScript）
```bash
cd ..
npm create vite@latest frontend -- --template react-ts
cd frontend
npm install
npm install react-router-dom
npm install axios
npm install zustand
npm install antd @ant-design/icons
npm install dayjs
npm install -D @types/react-router-dom
```

### 4.2 前端项目结构
```
frontend/
├── public/              # 静态资源
├── src/
│   ├── api/             # API 接口
│   ├── assets/          # 资源文件
│   ├── components/      # 通用组件
│   ├── pages/           # 页面组件
│   ├── hooks/           # 自定义 Hooks
│   ├── store/           # 状态管理
│   ├── utils/           # 工具函数
│   ├── styles/          # 样式文件
│   ├── types/           # TypeScript 类型
│   ├── App.tsx          # 根组件
│   ├── main.tsx         # 入口文件
│   └── vite-env.d.ts
├── .env                 # 环境变量
├── .env.example
├── package.json
├── vite.config.ts
├── tsconfig.json
└── index.html
```

### 4.3 前端环境变量（.env）
```env
VITE_API_BASE_URL=http://localhost:3000/api/v1
VITE_APP_TITLE=电商系统
```

## 5. 管理后台项目初始化

### 5.1 创建管理后台项目
```bash
cd ..
npm create vite@latest admin -- --template react-ts
cd admin
npm install
npm install react-router-dom
npm install axios
npm install zustand
npm install antd @ant-design/icons
npm install dayjs
npm install -D @types/react-router-dom
```

### 5.2 管理后台项目结构
```
admin/
├── public/
├── src/
│   ├── api/
│   ├── components/
│   ├── pages/
│   ├── layout/          # 布局组件
│   ├── hooks/
│   ├── store/
│   ├── utils/
│   ├── styles/
│   ├── types/
│   ├── App.tsx
│   └── main.tsx
├── package.json
├── vite.config.ts
└── tsconfig.json
```

### 5.3 管理后台环境变量（.env）
```env
VITE_API_BASE_URL=http://localhost:3000/api/v1/admin
VITE_APP_TITLE=电商管理后台
```

## 6. 数据库初始化

### 6.1 创建数据库
```sql
CREATE DATABASE ecommerce_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 6.2 使用 Prisma 迁移
```bash
cd backend
npx prisma migrate dev --name init
```

### 6.3 生成 Prisma Client
```bash
npx prisma generate
```

### 6.4 初始化种子数据（可选）
```bash
npx prisma db seed
```

## 7. Docker 开发环境（推荐）

### 7.1 创建 docker-compose.yml
```yaml
version: '3.8'

services:
  mysql:
    image: mysql:8.0
    container_name: ecommerce_mysql
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: ecommerce_db
      MYSQL_USER: ecommerce_user
      MYSQL_PASSWORD: ecommerce_password
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
    command: --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci

  redis:
    image: redis:7-alpine
    container_name: ecommerce_redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

volumes:
  mysql_data:
  redis_data:
```

### 7.2 启动 Docker 服务
```bash
docker-compose up -d
```

### 7.3 停止 Docker 服务
```bash
docker-compose down
```

## 8. 启动项目

### 8.1 启动后端
```bash
cd backend
npm run dev
# 后端服务运行在 http://localhost:3000
```

### 8.2 启动前端
```bash
cd frontend
npm run dev
# 前端服务运行在 http://localhost:5173
```

### 8.3 启动管理后台
```bash
cd admin
npm run dev
# 管理后台运行在 http://localhost:5174
```

## 9. 开发流程

### 9.1 功能开发步骤
1. **数据库设计**：在 `prisma/schema.prisma` 中定义模型
2. **运行迁移**：`npx prisma migrate dev`
3. **生成 Client**：`npx prisma generate`
4. **后端开发**：编写 Controller、Service、Route
5. **前端开发**：编写页面和组件
6. **联调测试**：前后端联调

### 9.2 代码规范
- 使用 ESLint 和 Prettier
- 遵循 TypeScript 类型检查
- 提交前运行 lint 检查

### 9.3 Git 工作流
```bash
# 创建功能分支
git checkout -b feature/user-module

# 提交代码
git add .
git commit -m "feat: 添加用户模块"

# 推送到远程
git push origin feature/user-module

# 合并到开发分支
git checkout develop
git merge feature/user-module
```

## 10. 常见问题

### 10.1 数据库连接失败
- 检查数据库服务是否启动
- 检查 .env 中的数据库配置是否正确
- 检查 MySQL 用户权限

### 10.2 Redis 连接失败
- 检查 Redis 服务是否启动
- 检查 Redis 配置是否正确
- 检查防火墙设置

### 10.3 端口冲突
- 修改 .env 中的端口配置
- 或使用 `lsof -i :3000` 查看占用端口的进程

### 10.4 Prisma 迁移失败
- 检查数据库连接
- 检查 schema.prisma 语法
- 可以手动重置数据库：`npx prisma migrate reset`

## 11. 下一步

1. 按照开发方案逐步实现功能模块
2. 参考数据库设计文档创建表结构
3. 根据技术栈选型文档配置开发环境
4. 开始第一个功能模块的开发（建议从用户模块开始）

## 12. 推荐学习资源

- [React 官方文档](https://react.dev)
- [TypeScript 官方文档](https://www.typescriptlang.org)
- [Prisma 官方文档](https://www.prisma.io/docs)
- [Express 官方文档](https://expressjs.com)
- [Ant Design 官方文档](https://ant.design)

---

**提示**：开发过程中遇到问题，请先查看相关文档和错误日志，大多数问题都能通过查阅文档解决。
